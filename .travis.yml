language: go
go:
- 1.10.x
before_install:
- find $GOPATH/src/github.com/ -depth -exec rename 's/(.*)\/([^\/]*)/$1\/\L$2/' {}
  \;
after_install:
- find $GOPATH/src/github.com/ -depth -exec rename 's/(.*)\/([^\/]*)/$1\/\L$2/' {}
  \;
stages:
- compile
- test
- name: acceptance
  if: branch = master OR type = pull_request
jobs:
  include:
  - stage: compile
    script: make
  - stage: test
    script: make unit
  - stage: acceptance
    script: make integration
notifications:
  slack: ignw:IxpMZ19gbbzU0vAM2SjvGtFx
env:
  global:
  - secure: bksZsDVruQFxTIV4wsDg3FxdypF2WQTjyVlQYEwFDG/CKUIeB5ZA1r2jHVvq20l0ZD9PbgtGpgbwCkrlTxcw4OAuiNnKQkvUlWNo3inJfdHpe4oiQG+Lzvd8wCjHWL8PiLDqgiUwZhPC9M/jaOSFu/1pUAyi9J+jkZGKSHWo55hxRH6qe0BY+aq9R1YX8QjdjZEO3DGdQ7JK7gLhHnrnJ9RS3tciYoKOtdNQLqTNjiRGST/dj3tbDQPiU7KPMm9sfMb2TT1zwICsWjZOXSXCcoVBSWFhpK96Dc2tY+GDECxD4rJEouLgyeD67qLqRIJA8Vsti9sZPv4rOjwATUnqu1x5QIukpGuEiR42fEaDOiEBNoCKCfzheJ8KxiKnt4nkTUVxru3GqQZKS2mJrgVLHk8rOXN78JQ88AnjeYBuCTylHZxZKYotfB6OLqXTBl1maihtkWB2iug0sEX8rmNkPxgly870MOSJO4H6c2t5eBNyEUOyX7tpL4dkdHugOgt3oZjlN6jk/7UPC7bNgCI77bhATsW1JEioiPvyxHl6APHaW4rdlXF67O7Ma1Il1Z7V6k4E4+UnKybYe/MRPH9ZcaMMa8O/q8HSG5mU678Y9enIkji+4Fq2pFJF9RIv6D9YdWhNF2wb6BpLfTWM59Pn2tl5BJswcXb1ASBYqj0XRTs=
  - secure: arjNiduiGrC5so/G+L/x8IQaSk4aQYRMRzyoE02FDML09CCHb1z7J65AtjYMDiJ/CKkUu3KK76IHe9YfkdHk3mZ6MC8m3ZB3GUNFU/wZY3Fc9zw7ymtX0JRfjxY2UH5IZ6Ir7lYfcFizqKdHeJlpF7fM0dq9UcG9Zb/0oDBjOIPF0oW/fZP5yO8QFjN14QGzIy1ozUcRnxu8/PheppPYT2TvcctEsSqmyFSR4zN20YOgBRyDATSKrAuHzEcKvmaZCRuZlMZeBqq/IabyG7M+Qhnxwz2aRTS2WdZxyoZpfzHts0SV8Gqds/2Zzj76Eb+WsOr24w/ls6PVAvKmE1Al2bAb0ynwf+d0bnDzk+B4Cm9AL+yRyitICrEKvtFDddMFgreG3gYqTRRQU9MByDb+fti+80wXHl2l1eKrF7RNk62a6/3WR50L1eq5RIYdFGJ8tltVZf8QtUBRQt0sU8BaCFDmcOBgwyygr+2jVAevAnmthKUPS19TNDsvi+BASbNwfXwNyV6ehwH0ZRSZEhNVWDxPSwgAiMQWrJaeH12obY495vmyKTZ9C72qXTTZFIu88sC8bxxY2wkIQYp/BKxcuUvb23q12lV7G2aEV84NVk41JqGsZn3VvNWabF3kvMB+e97HCndOsL5IGR35aI2f4TWZ503zvLggedwdmmcJ8Pw=
  - secure: NGfh3XZXwr5hhlgH4v3Nhvks9MaJcHhUbsloo3cj1LYvYIzPtzpzmOpjBzEnVpoPjKcvmwpHFI2VKyZzD5K0k80iRY+U37Ci+gjxu8KmsKwcFxA5hLtDKRD/x/jTcaFq50GPzNrycIVEqBV/v+1gxFUTqpMXnNT6SSxY6VOltla7Xit9aFQWt8ylSHmE3LRaKxUxMkDnNZCRaYDOg1Y985rf6xCEKNYnge0xszeAZHVUvi6owArMsbD82GCBflUcPTn0pN6BPqNVjeOhByRiKhMvNul1vU1if+2YzY+R3HvMVKRvO6Q/6bqJorM4pRjJ60NM61lwtOsrEQAgYEWoRtZLy2kjUbW+sxLZvylu4OH+iWVyM1d723/4eMUKjnKnv0z2MkSFQLffUsJasYh2hsGx39ilwmA6NpD3Rzv/7zLqmEZae6G/dFrTz80Axd4aObUeFIGwhOsPE7iNpzlEGW21cZtOEq/eCQNWF598SoejAczcOPBgOvWtEK19xYB5b2uNXJ/WU6yjTiYEf8GHLR/8FZ98KHMlXY8qDaFM2bCLKYgo8fSZJHYEWOBbgqzRZuHvMo50A+LzrL63qVfn/IhbWQOwKAEMbIXUe5Hk0xryy6ThkqTdTVPdMTZ4vhYWomtQNsHQKq0RsraNPS+JpwUsyxw5UOUReDAu476Jf/E=
  - secure: eQryEJCDHeySn4DQhDocHIUMWKnzZBg4fqnW/UA4tzL2zUPid/jiPmfk0eMnVjv9ZbYCN+Gu2TVLRoJ5Mze8Av8LiF50+8g/MvrmdonzpvMDF0/ZithudHKZD5DXZ9T0wjcCYDrxBm4thp8/lfwmvmirux8xvqOqHlrJFv3/r6EpVg/2Gj/cp1qqcki5MPz0poReqvIE65Bdwhj9D0ZC6ESfjGYgissXc8DfMEZmcJYDXdvAV7HVC9rhCgVjN3f7g6TiJPoTmnhw7p6zyDy2/odh5Ej5vk1wtqv1JZr1Rcys1wGw6T9695YyyOYvzOXHaFhCVWYC3zKD48wpSs+pzJuKxYemSedsLRdCuklDnJzt8FrdsLiT/lhk4P66rWEPPnU6xfkDxV45Bf9YHlI/5IlD7w/o/OCwar8Sjz/bmMPPNxjH5US4jUgIVYAKPThAla/xxVactFXiMb4FAD7J9ZDlqnoIgMs47unmcwwyfbXPljLPMZ5UDdwc+GSIbwfnzazcn/UQ9gxTzsv4rN/T/lqy2jiC/WnDWqTDkbCgKcYWrKMGlUjBetOhKBOcHIIxl7kBzmcfOj01/jhMY37PMRnSleYoiVsSTBkKHsoCXycZrzYIvIIeHwYVk+698/j4HmjJCYODbBrDeMzhxV87gJ0zg8G9YPsZ4T6uTLPu+Oo=
