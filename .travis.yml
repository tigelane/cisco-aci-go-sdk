language: go
go:
- 1.10.x
before_install:
- find $GOPATH/src/github.com/ -depth -exec rename 's/(.*)\/([^\/]*)/$1\/\L$2/' {}
  \;
after_install:
- find $GOPATH/src/github.com/ -depth -exec rename 's/(.*)\/([^\/]*)/$1\/\L$2/' {}
  \;
stages:
- compile
- test
- name: acceptance
  if: branch = master OR type = pull_request
jobs:
  include:
  - stage: compile
    script: make
  - stage: test
    script: make unit
  - stage: acceptance
    script: make integration
notifications:
  slack: ignw:IxpMZ19gbbzU0vAM2SjvGtFx
env:
  global:
     secure: "kjREn5DG/x9Zve0Fe4i+YJrZrrWBkFWQPcLcv6sVZG+UcPVRxE4d9ycGCuNWq5nY4R7LvrC/PVQJjGp2Q86BiqZdUtB2soue2DJK/QNb0ENqNgl3LTYL7MQYHIkt1oG+ya7U1nzl3nnggLOqsaWIa2Q6w+bTGCGHsYKop6UTGAjkwbwKFQrtX0gSI7thiI9HHbIAJv3e614/ZIsgzeMSIW/GuMjP05Ch10JFpYdwFdA3+FPrAlVTESPuXZS7i7sfssjg1gX5+anmr/l8ZAsnFI9OrNfffmUKcWWH5GTFDJTFcllcS6mNijW83bGTTqT1Dr8I2KPqnlS8ACvQhOZ1B1+uh/Dc9bLI4WzgTFjgmnVyCaXtwf4qdrCgNkDo5KpTLnjAC/aW+OuG7HteI/Di3xmnYgJT0jMJNPJAZWOp/IMdX3SeXibuApN3wMnYOop7XCiCHgq8QduvVf31slKJ0Ey+atkE7sSukyXxIm+/N/IHQhuUUDhfCgrpMQm4zBWmoBx277w2tjezD9A2Rz/8Sg4tjjduro6rixdytDssA9RXva0ZwuRjko9nujGKN3kxWJG7bTeM4irqCbncD6BucHgeTnn9eaQKd5w/kLsYAkdHaqjIIp5Z3G/I/+pP1SVvsRHQWxAaIiv9fISIsQvH6fneCgerEa1XhYbzMeFLDZs="
