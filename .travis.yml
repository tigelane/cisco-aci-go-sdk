language: go
go:
- 1.10.x
before_install:
- find $GOPATH/src/github.com/ -depth -exec rename 's/(.*)\/([^\/]*)/$1\/\L$2/' {}
  \;
after_install:
- find $GOPATH/src/github.com/ -depth -exec rename 's/(.*)\/([^\/]*)/$1\/\L$2/' {}
  \;
stages:
- compile
- test
- name: acceptance
  if: branch = master OR type = pull_request
jobs:
  include:
  - stage: compile
    script: make
  - stage: test
    script: make unit
  - stage: acceptance
    script: make integration
notifications:
  slack: ignw:IxpMZ19gbbzU0vAM2SjvGtFx
env:
  global:
    secure: CJAZZnFUSvaDAhEZyBZUhXZ9ZL0EK0mJ3rI41sDw/ZGCSoVT7i3f9sIl6IkcRZk6ZwQZFKrTi3xSt1LA4wnCatBm7vWXV73/q4PC+poBRzxbAbCaZieedMCVYrXNnGLtBh263LVHoXEJdaCi/sOl2+Q37yNY/9RFK3A02D2b3UVeUznOZuXFEGfgQeYudJzfCzKXkzQlSy0/a9Zy1YQjCrSTvZmtAnGJ37zRy2lL8qbmYzECvStwAeOICxlX16Ol0NiMxqFJY3Q6NKKb00RdQAUuusyTG1ZMRSP65ZFSdJOZDg+TBMTGOt6O2BCrq4ZAK2pdNLzYqu9eYWvq8Y+pE7qMujcCccZAe08we2TiiJJzdcmsEkKb+UdfzVddYBTSpLJS0q8/yLjt4TxODDL7nqIfb/mJvzoorjEPYOCys3/edlOiOwUyeWtYJxhvoMsnWx4af1u7Ji0bl3FnjKobHr1nuYfR8H5VwWW0khy7xKJdlriyg/IZjEUQdvDsnottgfN9nuulRRsjTATVuTEDG8l8Q/Alo0oGeHAkmIDwqqjcluiwF41mWd9Apcqvt1fX2hGdPaToym32PQMy3qTiBCQG7d9nfec9ZanX1gCd2UghoBspl84xwdciFlYnVCvWdmSRWiZ7DFcE+M/XzSEuWyE6V2AczBjXCUPJOXJqa2A=
