language: go
go:
- 1.10.x
before_install:
- find $GOPATH/src/github.com/ -depth -exec rename 's/(.*)\/([^\/]*)/$1\/\L$2/' {}
  \;
after_install:
- find $GOPATH/src/github.com/ -depth -exec rename 's/(.*)\/([^\/]*)/$1\/\L$2/' {}
  \;
stages:
- compile
- test
- name: acceptance
  if: branch = master OR type = pull_request
jobs:
  include:
  - stage: compile
    script: make
  - stage: test
    script: make unit
  - stage: acceptance
    script: make integration
env:
  global:
    secure: bfE7NjzhIUhfsckWV2jN+LCZ+qN2VBZkWloUemlFILecpWi1uhw0D+PUODAmwHMARk6WGttvPEHQ10e/OsUeo/hKZjyqK0UH42aXrexf7q6oB6JZuHBCCr4R5zRCKNpPesmvAuhj1+0+PlI+ddSgZHhbFW09AiOaqdk4Uja4pH8UESyQz7t6FRaASIpYN6ov9uqI56OV4SieD81ZgDWL7hkD5XWWVRZ+4gMxqVbGemiSBkD43Y+MKzaFreQxROuZeaduXDUzZsmX/n6G22S0MlO99rajpuosLuDyPA0Pg9sImTPb7i1O+DZumHwYO+4EMJy9ixzckwpAWKBIctJvaDLkline/Vb5STQmbDW20p9oFRipTiZdem5dOQHjYm2opau6kiMsrTW7zzYlWrolt0cDwfIa/JXEgzjwrSA6k0xgQxQBuOepmSF8PnuXmeZQMUe2Nlxsf79vLg/Q1MVFWxh+O7pCwHnGhvvc6OdPoedmfk6g5YwaO7TUlORuRTEqCtHfx8aEoiu3Q8s9+tPI+IXxhF/SJYJ7RsyQ6OpYbtz9AQl70aZpIJi/GlHam3L5s4HOvomG046pP8Z3ZauIXmw9BBcX5isVrTyzVPOlPxRov1hYGfJAZ1XnXcoDKM2pfvPX62XUk/0jDSbzR/ZFVQR/Iw5qFUB/8E5q3M3ZRvA=
