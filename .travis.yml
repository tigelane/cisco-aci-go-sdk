language: go
go:
- 1.10.x
before_install:
- find $GOPATH/src/github.com/ -depth -exec rename 's/(.*)\/([^\/]*)/$1\/\L$2/' {}
  \;
after_install:
- find $GOPATH/src/github.com/ -depth -exec rename 's/(.*)\/([^\/]*)/$1\/\L$2/' {}
  \;
stages:
- compile
- test
- name: acceptance
  if: branch = master OR type = pull_request
jobs:
  include:
  - stage: compile
    script: make
  - stage: test
    script: make unit
  - stage: acceptance
    script: make integration
notifications:
  slack: ignw:IxpMZ19gbbzU0vAM2SjvGtFx
env:
  global:
  - secure: kjREn5DG/x9Zve0Fe4i+YJrZrrWBkFWQPcLcv6sVZG+UcPVRxE4d9ycGCuNWq5nY4R7LvrC/PVQJjGp2Q86BiqZdUtB2soue2DJK/QNb0ENqNgl3LTYL7MQYHIkt1oG+ya7U1nzl3nnggLOqsaWIa2Q6w+bTGCGHsYKop6UTGAjkwbwKFQrtX0gSI7thiI9HHbIAJv3e614/ZIsgzeMSIW/GuMjP05Ch10JFpYdwFdA3+FPrAlVTESPuXZS7i7sfssjg1gX5+anmr/l8ZAsnFI9OrNfffmUKcWWH5GTFDJTFcllcS6mNijW83bGTTqT1Dr8I2KPqnlS8ACvQhOZ1B1+uh/Dc9bLI4WzgTFjgmnVyCaXtwf4qdrCgNkDo5KpTLnjAC/aW+OuG7HteI/Di3xmnYgJT0jMJNPJAZWOp/IMdX3SeXibuApN3wMnYOop7XCiCHgq8QduvVf31slKJ0Ey+atkE7sSukyXxIm+/N/IHQhuUUDhfCgrpMQm4zBWmoBx277w2tjezD9A2Rz/8Sg4tjjduro6rixdytDssA9RXva0ZwuRjko9nujGKN3kxWJG7bTeM4irqCbncD6BucHgeTnn9eaQKd5w/kLsYAkdHaqjIIp5Z3G/I/+pP1SVvsRHQWxAaIiv9fISIsQvH6fneCgerEa1XhYbzMeFLDZs=
  - secure: WW+GMfKpSU4TsCmu0kfEeIDzDSj/X+IH7scnTyamKGerMe2UhHzcOsWRfQNrqsrgypzpyrONHseQo6wQ4+KYtQUCLw2FEto+6qcuHzFGR/5Rwq1fgoEOXhqSzzN5Y8mru1Z0qTnzBSpI8UnWGrbNbbEYctLhiTd2jAMUDmJTrthfNRnjBlJ3ofPUtsVrBL8xSEMCFHs0kmTFvAfLKVCaO0R8YS+a4fNJgYY5PvMzat7ZVyJlegQIzWDYTdyQaMFcunF2Rm3A6t2OarreLjObd/RIbcoSSAtOiE5w9p3X9/rvr5SxveKJGP0OurOOaELT7HZ0LfzLlMkkxZCMac9Z92tzM3bNonNS5iJuolUw5l7hZdQpobalPOLlYpgLQaQAdx089yQkEt+I48IjrX/QPvsfA1M7wbmaxEbPZX/XHkT4FCG0J2+1Px27z3x6svmSjgJlpuLYJpyz1zFg6yOcJBpEp8rPddXUQh+wrtdrunypNk33ytoAOYmFJxied1EdBFnXsLP6NEWqr4zd9rlN8vUldf5g5zUxh9Baam+6jfyVHn5N4Qnug2hOcGq/prXmMoFm0OYQ/u+Q0TM54+ib//KREqRmiZf6j5UWYydhLE9eciHmGA++uLn0Y+j6MxlSaUguiIin2arhs1X59+ImAJ2BfhegpGF1Ym87aVLD0tg=
